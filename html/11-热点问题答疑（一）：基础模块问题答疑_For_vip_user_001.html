<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>11-çƒ­ç‚¹é—®é¢˜ç­”ç–‘ï¼ˆä¸€ï¼‰ï¼šåŸºç¡€æ¨¡å—é—®é¢˜ç­”ç–‘</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <style>
        html {
            color: #333;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            text-rendering: optimizelegibility;
            font-family: Helvetica Neue, PingFang SC, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif
        }

        html.borderbox *,
        html.borderbox :after,
        html.borderbox :before {
            box-sizing: border-box
        }

        article,
        aside,
        blockquote,
        body,
        button,
        code,
        dd,
        details,
        dl,
        dt,
        fieldset,
        figcaption,
        figure,
        footer,
        form,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        header,
        hr,
        input,
        legend,
        li,
        menu,
        nav,
        ol,
        p,
        pre,
        section,
        td,
        textarea,
        th,
        ul {
            margin: 0;
            padding: 0
        }

        article,
        aside,
        details,
        figcaption,
        figure,
        footer,
        header,
        menu,
        nav,
        section {
            display: block
        }

        audio,
        canvas,
        video {
            display: inline-block
        }

        body,
        button,
        input,
        select,
        textarea {
            font: 300 1em/1.8 PingFang SC, Lantinghei SC, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, Helvetica, sans-serif
        }

        button::-moz-focus-inner,
        input::-moz-focus-inner {
            padding: 0;
            border: 0
        }

        table {
            border-collapse: collapse;
            border-spacing: 0
        }

        fieldset,
        img {
            border: 0
        }

        blockquote {
            position: relative;
            color: #999;
            font-weight: 400;
            border-left: 1px solid #1abc9c;
            padding-left: 1em;
            margin: 1em 3em 1em 2em
        }

        @media only screen and (max-width: 640px) {
            blockquote {
                margin: 1em 0
            }
        }

        abbr,
        acronym {
            border-bottom: 1px dotted;
            font-variant: normal
        }

        abbr {
            cursor: help
        }

        del {
            text-decoration: line-through
        }

        address,
        caption,
        cite,
        code,
        dfn,
        em,
        th,
        var {
            font-style: normal;
            font-weight: 400
        }

        ol,
        ul {
            list-style: none
        }

        caption,
        th {
            text-align: left
        }

        q:after,
        q:before {
            content: ""
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative
        }

        :root sub,
        :root sup {
            vertical-align: baseline
        }

        sup {
            top: -.5em
        }

        sub {
            bottom: -.25em
        }

        a {
            color: #1abc9c
        }

        a:hover {
            text-decoration: underline
        }

        .typo a {
            border-bottom: 1px solid #1abc9c
        }

        .typo a:hover {
            border-bottom-color: #555;
            color: #555
        }

        .typo a:hover,
        a,
        ins {
            text-decoration: none
        }

        .typo-u,
        u {
            text-decoration: underline
        }

        mark {
            background: #fffdd1;
            border-bottom: 1px solid #ffedce;
            padding: 2px;
            margin: 0 5px
        }

        code,
        pre,
        pre tt {
            font-family: Courier, Courier New, monospace
        }

        pre {
            background: hsla(0, 0%, 97%, .7);
            border: 1px solid #ddd;
            padding: 1em 1.5em;
            display: block;
            -webkit-overflow-scrolling: touch
        }

        hr {
            border: none;
            border-bottom: 1px solid #cfcfcf;
            margin-bottom: .8em;
            height: 10px
        }

        .typo-small,
        figcaption,
        small {
            font-size: .9em;
            color: #888
        }

        b,
        strong {
            font-weight: 700;
            color: #000
        }

        [draggable] {
            cursor: move
        }

        .clearfix:after,
        .clearfix:before {
            content: "";
            display: table
        }

        .clearfix:after {
            clear: both
        }

        .clearfix {
            zoom: 1
        }

        .textwrap,
        .textwrap td,
        .textwrap th {
            word-wrap: break-word;
            word-break: break-all
        }

        .textwrap-table {
            table-layout: fixed
        }

        .serif {
            font-family: Palatino, Optima, Georgia, serif
        }

        .typo-dl,
        .typo-form,
        .typo-hr,
        .typo-ol,
        .typo-p,
        .typo-pre,
        .typo-table,
        .typo-ul,
        .typo dl,
        .typo form,
        .typo hr,
        .typo ol,
        .typo p,
        .typo pre,
        .typo table,
        .typo ul,
        blockquote {
            margin-bottom: 1rem
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: PingFang SC, Helvetica Neue, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif;
            color: #000;
            line-height: 1.35
        }

        .typo-h1,
        .typo-h2,
        .typo-h3,
        .typo-h4,
        .typo-h5,
        .typo-h6,
        .typo h1,
        .typo h2,
        .typo h3,
        .typo h4,
        .typo h5,
        .typo h6 {
            margin-top: 1.2em;
            margin-bottom: .6em;
            line-height: 1.35
        }

        .typo-h1,
        .typo h1 {
            font-size: 2em
        }

        .typo-h2,
        .typo h2 {
            font-size: 1.8em
        }

        .typo-h3,
        .typo h3 {
            font-size: 1.6em
        }

        .typo-h4,
        .typo h4 {
            font-size: 1.4em
        }

        .typo-h5,
        .typo-h6,
        .typo h5,
        .typo h6 {
            font-size: 1.2em
        }

        .typo-ul,
        .typo ul {
            margin-left: 1.3em;
            list-style: disc
        }

        .typo-ol,
        .typo ol {
            list-style: decimal;
            margin-left: 1.9em
        }

        .typo-ol ol,
        .typo-ol ul,
        .typo-ul ol,
        .typo-ul ul,
        .typo li ol,
        .typo li ul {
            margin-bottom: .8em;
            margin-left: 2em
        }

        .typo-ol ul,
        .typo-ul ul,
        .typo li ul {
            list-style: circle
        }

        .typo-table td,
        .typo-table th,
        .typo table caption,
        .typo table td,
        .typo table th {
            border: 1px solid #ddd;
            padding: .5em 1em;
            color: #666
        }

        .typo-table th,
        .typo table th {
            background: #fbfbfb
        }

        .typo-table thead th,
        .typo table thead th {
            background: hsla(0, 0%, 95%, .7)
        }

        .typo table caption {
            border-bottom: none
        }

        .typo-input,
        .typo-textarea {
            -webkit-appearance: none;
            border-radius: 0
        }

        .typo-em,
        .typo em,
        caption,
        legend {
            color: #000;
            font-weight: inherit
        }

        .typo-em {
            position: relative
        }

        .typo-em:after {
            position: absolute;
            top: .65em;
            left: 0;
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            content: "\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"
        }

        .typo img {
            max-width: 100%
        }

        .common-content {
            font-weight: 400;
            color: #353535;
            line-height: 1.75rem;
            white-space: normal;
            word-break: normal;
            font-size: 1rem
        }

        .common-content img {
            display: block;
            max-width: 100%;
            background-color: #eee
        }

        .common-content audio,
        .common-content video {
            width: 100%;
            background-color: #eee
        }

        .common-content center,
        .common-content font {
            margin-top: 1rem;
            display: inline-block
        }

        .common-content center {
            width: 100%
        }

        .common-content pre {
            margin-top: 1rem;
            padding-left: 0;
            padding-right: 0;
            position: relative;
            overflow: hidden
        }

        .common-content pre code {
            font-size: .8rem;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            width: 100%;
            box-sizing: border-box;
            padding-left: 1rem;
            padding-right: 1rem;
            overflow-x: auto
        }

        .common-content hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        .common-content b,
        .common-content h1,
        .common-content h2,
        .common-content h3,
        .common-content h4,
        .common-content h5,
        .common-content strong {
            font-weight: 700
        }

        .common-content h1,
        .common-content h2 {
            font-size: 1.125rem;
            margin-bottom: .45rem
        }

        .common-content h3,
        .common-content h4,
        .common-content h5 {
            font-size: 1rem;
            margin-bottom: .45rem
        }

        .common-content p {
            font-weight: 400;
            color: #353535;
            margin-top: .15rem
        }

        .common-content .orange {
            color: #ff5a05
        }

        .common-content .reference {
            font-size: 1rem;
            color: #888
        }

        .custom-rich-content h1 {
            margin-top: 0;
            font-weight: 400;
            font-size: 15.25px;
            border-bottom: 1px solid #eee;
            line-height: 2.8
        }

        .custom-rich-content li,
        .custom-rich-content p {
            font-size: 14px;
            color: #888;
            line-height: 1.6
        }

        table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        table.hljs-ln,
        table.hljs-ln tbody,
        table.hljs-ln td,
        table.hljs-ln tr {
            box-sizing: border-box
        }

        table.hljs-ln td {
            padding: 0;
            border: 0
        }

        table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            user-select: none
        }

        table.hljs-ln td.hljs-ln-code,
        table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            font-size: 12px;
            line-height: 20px;
            vertical-align: top
        }

        table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            color: #24292e;
            word-wrap: normal;
            white-space: pre
        }

        video::-webkit-media-controls {
            overflow: hidden !important
        }

        video::-webkit-media-controls-enclosure {
            width: calc(100% + 32px);
            margin-left: auto
        }

        ._29HP61GA_0 {
            max-width:800px;
            margin:0 auto;
            margin-bottom: 20px;
            font-weight: 400;
            color: #353535;
            line-height: 1.76;
            white-space: normal;
            word-break: normal;
            font-size: 17px;
            -webkit-transition: background-color .3s ease;
            transition: background-color .3s ease
        }

        ._29HP61GA_0 .MathJax_Display {
            overflow: auto
        }

        ._29HP61GA_0 .poster {
            position: fixed;
            left: -10000px;
            top: -10000px;
            overflow: hidden;
            padding: 1rem;
            background: #ececec
        }

        ._29HP61GA_0 .richcontent-pre-copy {
            font-size: 13px;
            color: #888;
            position: absolute;
            right: 1em;
            top: .5em;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 .richcontent-pre-copy .iconfont {
            font-size: 12px;
            margin-right: .2em
        }

        ._29HP61GA_0 a {
            color: #fa8919;
            border-bottom: 1px solid #fa8919
        }

        ._29HP61GA_0 img {
            display: block;
            max-width: 100%;
            position: relative;
            left: 50%;
            -webkit-transform: translateX(-50%);
            transform: translateX(-50%);
            background-color: #eee;
            vertical-align: top;
            border-radius: 0
        }

        ._29HP61GA_0 audio,
        ._29HP61GA_0 video {
            width: 100%;
            background-color: #eee
        }

        ._29HP61GA_0 pre {
            margin-top: 16px;
            padding: 34px 0 0;
            margin-bottom: 30px;
            position: relative;
            border-radius: 6px;
            background: rgba(246, 247, 251, .749);
            border: 0
        }

        ._29HP61GA_0 pre code {
            font-size: 12px;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            margin-left: 16px;
            margin-right: 16px;
            overflow-x: scroll
        }

        ._29HP61GA_0 pre code:after {
            content: "";
            height: 30px;
            width: 100%;
            display: block
        }

        ._29HP61GA_0 hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        ._29HP61GA_0 h1,
        ._29HP61GA_0 h2,
        ._29HP61GA_0 h3,
        ._29HP61GA_0 h4,
        ._29HP61GA_0 h5 {
            margin-bottom: 20px;
            margin-top: 0;
            font-weight: 700
        }

        ._29HP61GA_0 b,
        ._29HP61GA_0 strong {
            font-weight: 700
        }

        ._29HP61GA_0 h1 {
            font-size: 21px
        }

        ._29HP61GA_0 h2 {
            font-size: 20px
        }

        ._29HP61GA_0 h3 {
            font-size: 19px
        }

        ._29HP61GA_0 h4 {
            font-size: 18px
        }

        ._29HP61GA_0 h5 {
            font-size: 17px
        }

        ._29HP61GA_0 center,
        ._29HP61GA_0 p {
            font-weight: 400;
            color: #353535;
            margin-top: 0;
            margin-bottom: 30px;
            word-break: break-word
        }

        ._29HP61GA_0 center {
            text-align: center
        }

        ._29HP61GA_0 blockquote {
            margin-top: 0;
            margin-bottom: 34px;
            border-left: 3px solid #e8e8e8;
            padding-left: 17px;
            color: #353535
        }

        ._29HP61GA_0 blockquote p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol,
        ._29HP61GA_0 ul {
            margin-bottom: 30px
        }

        ._29HP61GA_0 ol p,
        ._29HP61GA_0 ul p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol {
            list-style: decimal;
            margin-left: 20px
        }

        ._29HP61GA_0 ul li {
            padding-left: 17px;
            position: relative;
            margin-bottom: 10px
        }

        ._29HP61GA_0 ul li:after {
            content: "";
            height: 6px;
            width: 6px;
            border-radius: 50%;
            background: #353535;
            position: absolute;
            top: 10px;
            left: 0
        }

        ._29HP61GA_0 .orange {
            color: #fa8919
        }

        ._29HP61GA_0 .reference {
            color: #888
        }

        ._29HP61GA_0 .m-right {
            text-align: right
        }

        ._29HP61GA_0 .m-center {
            text-align: center;
            display: block
        }

        ._29HP61GA_0 .m-gray {
            color: #888
        }

        ._29HP61GA_0 .m-small {
            font-size: 15px
        }

        ._29HP61GA_0 table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        ._29HP61GA_0 table.hljs-ln,
        ._29HP61GA_0 table.hljs-ln tbody,
        ._29HP61GA_0 table.hljs-ln td,
        ._29HP61GA_0 table.hljs-ln tr {
            -webkit-box-sizing: border-box;
            box-sizing: border-box
        }

        ._29HP61GA_0 table.hljs-ln td {
            padding: 0;
            border: 0
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            font-size: 12px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code,
        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            line-height: 20px;
            vertical-align: top
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            font-size: 13px;
            color: #666;
            word-wrap: normal;
            white-space: pre
        }

    </style>
</head>
<body>
<div class="_29HP61GA_0">
<h1>11-çƒ­ç‚¹é—®é¢˜ç­”ç–‘ï¼ˆä¸€ï¼‰ï¼šåŸºç¡€æ¨¡å—é—®é¢˜ç­”ç–‘</h1>
<p>ä½ å¥½ï¼Œæˆ‘æ˜¯æˆ´é“­ã€‚</p><p>ä¸“æ ä¸Šçº¿ä»¥æ¥ï¼Œæˆ‘é€šè¿‡è¯„è®ºåŒºæ”¶åˆ°äº†å¾ˆå¤šåŒå­¦æå‡ºçš„é—®é¢˜ã€å»ºè®®ã€å¿ƒå¾—å’Œç»éªŒï¼Œå½“ç„¶æçš„é—®é¢˜å±…å¤šã€‚è™½ç„¶æˆ‘æœªåœ¨è¯„è®ºåŒºå¯¹æ¯æ¡ç•™è¨€åšå‡ºå›å¤ï¼Œä½†æ˜¯æˆ‘å¯¹å¤§å®¶æå‡ºçš„é—®é¢˜å´éƒ½ä¸€ä¸€è®°å½•äº†ä¸‹æ¥ï¼Œç­‰å¾…è¿™æ¬¡ç­”ç–‘æ–‡ç« çš„åˆ°æ¥ã€‚å…¶å®ï¼Œä¸å…‰æ˜¯åœ¨ç•™è¨€åŒºï¼Œä¹Ÿæœ‰ä¸€äº›æœ‹å‹é€šè¿‡ç§ä¿¡è·Ÿæˆ‘åé¦ˆäº†å­¦ä¹ ä¸“æ é‡åˆ°çš„é—®é¢˜ã€‚</p><p>æ‰€ä»¥ï¼Œä»Šå¤©æˆ‘å°±å€Ÿæ­¤æœºä¼šï¼Œæ±‡æ€»å¹¶æ•´ç†äº†å‡ ä¸ªå…¸å‹å¹¶é‡è¦çš„é—®é¢˜ï¼Œå’Œä½ è¯¦ç»†è¯´ä¸€è¯´ï¼Œå¸Œæœ›å¯ä»¥è§£ç­”ä½ åœ¨å­¦ä¹ å‰é¢10ç¯‡æ–‡ç« æ—¶çš„ä¸€äº›å›°æƒ‘ã€‚</p><h2>åŠ¨æ€åº“åŠ è½½æ–¹å¼çš„ç›¸å…³é—®é¢˜</h2><p>@äº”å­æ£‹åœ¨çœ‹å®Œç¬¬5ç¯‡æ–‡ç« â€œ<a href="https://time.geekbang.org/column/article/86840">é“¾æ¥å™¨ï¼šç¬¦å·æ˜¯æ€ä¹ˆç»‘å®šåˆ°åœ°å€ä¸Šçš„ï¼Ÿ</a>â€åï¼Œå…³äºåŠ¨æ€åº“æ˜¯å¦å‚ä¸é“¾æ¥çš„é—®é¢˜ï¼Œé€šè¿‡ç§ä¿¡å’Œæˆ‘åé¦ˆäº†ä»–çš„è§‚ç‚¹ã€‚ä»–æŒ‡å‡ºï¼šåŠ¨æ€åº“ä¹Ÿæ˜¯è¦å‚ä¸é“¾æ¥çš„ï¼Œä¸ç„¶å°±æ²¡æ³•çŸ¥é“å‡½æ•°çš„æ ‡è®°åœ¨å“ªå„¿ã€‚</p><p>ä¸ºäº†å¸®åŠ©å¤§å®¶ç†è§£è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘æŠŠä¸è¿™ä¸ªé—®é¢˜ç›¸å…³çš„å†…å®¹ï¼Œå†å’Œä½ å±•å¼€ä¸€ä¸‹ã€‚</p><p>æˆ‘åœ¨æ–‡ç« ä¸­ï¼Œæ˜¯è¿™ä¹ˆé˜è¿°è¿™éƒ¨åˆ†å†…å®¹çš„ï¼š</p><blockquote>
<p>Mach-O æ–‡ä»¶æ˜¯ç¼–è¯‘åçš„äº§ç‰©ï¼Œè€ŒåŠ¨æ€åº“åœ¨è¿è¡Œæ—¶æ‰ä¼šè¢«é“¾æ¥ï¼Œå¹¶æ²¡å‚ä¸ Mach-Oæ–‡ä»¶çš„ç¼–è¯‘å’Œé“¾æ¥ï¼Œæ‰€ä»¥ Mach-Oæ–‡ä»¶ä¸­å¹¶æ²¡æœ‰åŒ…å«åŠ¨æ€åº“é‡Œçš„ç¬¦å·å®šä¹‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™äº›ç¬¦å·ä¼šæ˜¾ç¤ºä¸ºâ€œæœªå®šä¹‰â€ï¼Œä½†å®ƒä»¬çš„åå­—å’Œå¯¹åº”çš„åº“çš„è·¯å¾„ä¼šè¢«è®°å½•ä¸‹æ¥ã€‚è¿è¡Œæ—¶é€šè¿‡ dlopen å’Œ dlsym å¯¼å…¥åŠ¨æ€åº“æ—¶ï¼Œå…ˆæ ¹æ®è®°å½•çš„åº“è·¯å¾„æ‰¾åˆ°å¯¹åº”çš„åº“ï¼Œå†é€šè¿‡è®°å½•çš„åå­—ç¬¦å·æ‰¾åˆ°ç»‘å®šçš„åœ°å€ã€‚</p>
</blockquote><!-- [[[read_end]]] --><p>ç»†ç»†æƒ³æ¥ï¼Œè¿™ç§è¯´æ³•å¹¶ä¸ä¸¥è°¨ã€‚å…³äºè¿™ä¸ªé—®é¢˜ï¼Œæ›´ä¸¥è°¨çš„è¯´æ³•åº”è¯¥æ˜¯ï¼ŒåŠ è½½åŠ¨æ€åº“çš„æ–¹å¼æœ‰ä¸¤ç§ï¼š</p><ul>
<li>ä¸€ç§æ˜¯ï¼Œåœ¨ç¨‹åºå¼€å§‹è¿è¡Œæ—¶é€šè¿‡ dyld åŠ¨æ€åŠ è½½ã€‚é€šè¿‡ dyld åŠ è½½çš„åŠ¨æ€åº“éœ€è¦åœ¨ç¼–è¯‘æ—¶è¿›è¡Œé“¾æ¥ï¼Œé“¾æ¥æ—¶ä¼šåšæ ‡è®°ï¼Œç»‘å®šçš„åœ°å€åœ¨åŠ è½½åå†å†³å®šã€‚</li>
<li>ç¬¬äºŒç§æ˜¯ï¼Œæ˜¾å¼è¿è¡Œæ—¶é“¾æ¥ï¼ˆExplicit Runtime Linkingï¼‰ï¼Œå³åœ¨è¿è¡Œæ—¶é€šè¿‡åŠ¨æ€é“¾æ¥å™¨æä¾›çš„ API dlopen å’Œ dlsym æ¥åŠ è½½ã€‚è¿™ç§æ–¹å¼ï¼Œåœ¨ç¼–è¯‘æ—¶æ˜¯ä¸éœ€è¦å‚ä¸é“¾æ¥çš„ã€‚ï»¿<br>
ï»¿ä¸è¿‡ï¼Œé€šè¿‡è¿™ç§è¿è¡Œæ—¶åŠ è½½è¿œç¨‹åŠ¨æ€åº“çš„Appï¼Œè‹¹æœå…¬å¸æ˜¯ä¸å…è®¸ä¸Šçº¿ App Store çš„ï¼Œæ‰€ä»¥åªèƒ½ç”¨äºçº¿ä¸‹è°ƒè¯•ç¯èŠ‚ã€‚å…³äºè¿™ç§æ–¹å¼çš„é€‚ç”¨åœºæ™¯ï¼Œæˆ‘ä¹Ÿå·²ç»åœ¨æ–‡ç« ç¬¬6ç¯‡æ–‡ç« â€œ<a href="https://time.geekbang.org/column/article/87188">App å¦‚ä½•é€šè¿‡æ³¨å…¥åŠ¨æ€åº“çš„æ–¹å¼å®ç°æé€Ÿç¼–è¯‘è°ƒè¯•ï¼Ÿ</a>â€ä¸­å’Œä½ ä¸¾ä¾‹è¯´æ˜è¿‡ï¼Œä½ å¯ä»¥å†å›é¡¾ä¸‹ç›¸å…³å†…å®¹ã€‚</li>
</ul><p>åœ¨ç¬¬5ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†åŠ¨æ€åº“çš„è¿™ä¸¤ç§åŠ è½½æ–¹å¼æ··åœ¨ä¸€èµ·è¯´äº†ï¼Œè®©ä½ æ„Ÿåˆ°äº›è®¸å›°æƒ‘ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œæˆ‘ç‰¹åœ°åšä¸ªè¡¥å……è¯´æ˜ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å†çœ‹çœ‹ç¬¬6ç¯‡æ–‡ç« åçš„ç•™è¨€ã€‚è¿™ç¯‡æ–‡ç« ç•™è¨€åŒºçš„é—®é¢˜é›†ä¸­åœ¨ï¼šé¡¹ç›®ä¸­ä½¿ç”¨äº†CocoaPodsæ¥å¼€å‘ç»„ä»¶ï¼Œåœ¨ä½¿ç”¨InjectionIIIè°ƒè¯•æ—¶ï¼Œé‡åˆ°äº†ä¿®æ”¹æºç æ— æ³•è¿›è¡Œæ³¨å…¥çš„é—®é¢˜ã€‚</p><p>åœ¨è¿™é‡Œï¼Œæˆ‘é¦–å…ˆè¦æ„Ÿè°¢@manajayåŒå­¦åœ¨ InjectionIII çš„ issue é‡Œæ‰¾åˆ°äº†ç›¸å…³çš„è§£ç­”ï¼Œå¹¶åˆ†äº«åˆ°äº†ç•™è¨€åŒºã€‚</p><p>å…¶å®ï¼Œ<strong>å…³äº InjectionIII çš„è¿™éƒ¨åˆ†å†…å®¹ï¼Œæˆ‘æ›´å¸Œæœ›ä½ èƒ½å¤Ÿäº†è§£ InjectionIII çš„å·¥ä½œåŸç†ï¼Œä»è€ŒåŠ æ·±å¯¹è¿è¡Œæ—¶åŠ¨æ€åº“åŠ è½½åŸç†çš„ç†è§£ã€‚</strong>ç„¶åï¼Œæ ¹æ®è‡ªå·±çš„å·¥ç¨‹æƒ…å†µåŠ¨æ‰‹æ”¹é€ æˆ–è€…ç›´æ¥é€ ä¸ªæ–°è½®å­ï¼Œæˆ‘ç›¸ä¿¡ä¼šæå¤§åœ°æå‡ä½ çš„æŠ€æœ¯æ°´å¹³ï¼Œè‡³å°‘æ¯”ç›´æ¥ä½¿ç”¨å·²æœ‰è½®å­çš„æ•ˆæœè¦å¥½å¾—å¤šã€‚</p><p>æ‰€ä»¥ï¼Œè¿˜æ˜¯å›åˆ°æˆ‘åœ¨<a href="https://time.geekbang.org/column/article/85318">å¼€ç¯‡è¯</a>ä¸­å’Œä½ æåˆ°çš„è§‚ç‚¹ï¼šåŠ¨æ‰‹å°±ä¼šç¢°åˆ°é—®é¢˜ï¼Œå°±ä¼šæ€è€ƒï¼Œè¿™ä¸ªä¸»åŠ¨è¿‡ç¨‹ä¼šåŠ æ·±ä½ çš„è®°å¿†ï¼Œè¿™æ ·åé¢å†ç¢°åˆ°é—®é¢˜æ—¶ï¼Œä½ ä¼šæ›´å®¹æ˜“å°†ç›¸å…³çŸ¥è¯†ä¸²è”èµ·æ¥ï¼Œå½¢æˆåˆ›æ–°å¼çš„æ€è€ƒã€‚ä½†å¦‚æœä½ åœ¨ç¢°åˆ°å›°éš¾æ—¶ï¼Œå°±é€‰æ‹©æ”¾å¼ƒé‚£å¿…å®šä¼šæŠ±æœ‰é—æ†¾ã€‚</p><p>åœ¨ç¬¬8ç¯‡æ–‡ç« â€œ<a href="https://time.geekbang.org/column/article/87844">å¦‚ä½•åˆ©ç”¨ Clang ä¸º App æè´¨ï¼Ÿ</a>â€ä¸­ï¼Œ@é¹å“¥åŒå­¦åœ¨è¯„è®ºåŒºé—®äº†æˆ‘è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼š</p><blockquote>
<p>åœ¨ç¬¬1ç¯‡æ–‡ç« â€œ<a href="https://time.geekbang.org/column/article/85326">å»ºç«‹ä½ è‡ªå·±çš„iOSå¼€å‘çŸ¥è¯†ä½“ç³»</a>â€ä¸­ï¼Œä½ æåˆ°å¯¹æŸä¸€é¢†åŸŸçš„çŸ¥è¯†è¦åšåˆ°ç²¾é€šçš„ç¨‹åº¦ï¼Œè€Œä¸èƒ½åªæ˜¯äº†è§£ã€‚é‚£ä¹ˆï¼Œä½ åœ¨è¿™ä¸ªä¸“æ ä¸­æåˆ°äº†è¿™ä¹ˆå¤šå†…å®¹ï¼Œæˆ‘åº”è¯¥é€‰æ‹©å“ªäº›å†…å®¹å»æ·±å…¥ç ”ç©¶å‘¢ï¼Ÿè¿˜æ˜¯è¯´æ‰€æœ‰çš„å†…å®¹ï¼Œæˆ‘éƒ½éœ€è¦å»æ·±å…¥ç ”ç©¶ï¼Ÿ</p>
</blockquote><p>æˆ‘ç»™å‡ºçš„å›ç­”æ˜¯ï¼Œæ ¹æ®å·¥ä½œéœ€è¦æ¥é€‰æ‹©ã€‚æ¯”å¦‚è¯´ï¼Œå¦‚æœè°ƒè¯•é€Ÿåº¦çš„é—®é¢˜ï¼Œç¡®å®æ˜¯ä½ ç›®å‰å·¥ä½œä¸­é¢ä¸´çš„æœ€å¤§æŒ‘æˆ˜ï¼Œé‚£æˆ‘è§‰å¾—ä½ å°±åº”è¯¥åœ¨è¿™ä¸ªç‚¹ä¸Šæ·±æŒ–ï¼Œå¹¶å‹‡æ•¢åœ°å…‹æœå…¶ä¸­é‡åˆ°çš„å›°éš¾ï¼Œå°±åƒæˆ‘ä¸Šæ¬¡é€šè¿‡â€œæå®¢æ—¶é—´â€çš„å¹³å°ç›´æ’­æ—¶ï¼Œå’Œä½ åˆ†äº«çš„æˆ‘è‡ªå·±å­¦ç”»ç”»çš„ç»å†ä¸€æ ·ï¼ŒæŒ‘æˆ˜ç´ æçš„è¿‡ç¨‹ç¡®å®å¾ˆç—›è‹¦ï¼Œä½†æŒºè¿‡æ¥äº†ä¹‹åæˆ‘ä¼šå¾ˆå—ç›Šå¹¶äº«å—è‡ªå·±çš„è¿›æ­¥ã€‚å¯¹æˆ‘ä»¬è¿™ç§æ‰‹è‰ºäººæ¥è¯´ï¼Œä¸æ–­æŒ‘æˆ˜æ‰èƒ½ä¸æ–­è¿›æ­¥ã€‚</p><p>æœ€è¿‘æˆ‘åœ¨çœ‹ä¸€ä¸ªè±†ç“£è¯„åˆ†éå¸¸é«˜çš„æ—¥å‰§ã€ŠåŒ—å›½ä¹‹æ‹ã€‹ï¼Œåœ¨ç¬¬3é›†â€œå†³å¿ƒâ€é‡Œï¼Œä¸€ä½è€çˆ·çˆ·åœ¨åŒ—æµ·é“é€åˆ«æœ‹å‹æ—¶è¯´äº†ä¸€ç•ªè¯ï¼Œæˆ‘è§‰å¾—ç‰¹åˆ«æœ‰åŠ›é‡ã€‚æ‰€ä»¥ï¼Œæˆ‘æŠŠè¿™æ®µè¯æ”¾åœ¨è¿™é‡Œå’Œä½ å…±å‹‰ï¼š</p><blockquote>
<p>ä¸å¯æ€è®®å•Šï¼Œè™½ç„¶æ˜¯æµè¡Œæ­Œæ›²ï¼Œä¸è¿‡å‘¢ã€‚å¬åˆ°è¿™é¦–æ­Œï¼Œè¿™æ­Œæµè¡Œèµ·æ¥ï¼Œè®©äººå›æƒ³èµ·é‚£ä¸ªæ—¶ä»£çš„å¾€äº‹ã€‚é‚£å¹´å‘ç”Ÿäº†å¾ˆä¸¥é‡çš„å†»ç¾ï¼Œå†åŠ ä¸Šå†œä¸šæœºæ¢°çš„å¼•è¿›ï¼Œå†œåœºçš„ç»è¥æ–¹å¼æ…¢æ…¢ä¸ä¸€æ ·äº†ã€‚ä¸€èµ·æ¥å¼€è’çš„ä¼™ä¼´ä»¬ï¼Œæ”¶æ‹¾è¡Œæï¼Œä¸€ä¸ªä¸€ä¸ªåœ°ä»éº“ä¹¡ç¦»å¼€äº†ã€‚é‚£æ˜¯11æœˆå•Šï¼Œäº²å¯†çš„ä¼™ä¼´ä»¬ï¼Œå››å®¶ä¸€èµ·æ”¾å¼ƒäº†å†œåœºï¼Œé‚£ä¸ªæ—¶å€™ï¼Œæˆ‘ï¼Œå½“ç„¶è¦æ¥é€è¡Œï¼Œç¨€ç¨€è½è½åœ°ä¸‹èµ·äº†é›ªï¼Œé‚£æ—¶æµè¡ŒåŒ—å²›ä¸‰éƒï¼Œæœ‰å››å®¶è¦ç¦»å¼€ï¼Œæ¥é€è¡Œçš„åªæœ‰æˆ‘å’Œè€å©†ä¸¤ä¸ªäººï¼Œå¤§å®¶éƒ½ä¸€å¥è¯ä¹Ÿä¸è¯´ã€‚ä¸è¿‡ï¼Œé‚£ä¸ªæ—¶å€™ï¼Œæˆ‘çœŸæƒ³æŠŠå¿ƒé‡Œæƒ³çš„è¯´å‡ºæ¥ã€‚ä½ ä»¬ï¼Œè¿™ä¹ˆåšè¡Œå—ï¼Ÿè¿™æ˜¯è¾“äº†ä¹‹åé€ƒè·‘å•Šï¼ŒäºŒåå¤šå¹´æ¥ä¸€ç›´åœ¨ä¸€èµ·åŠªåŠ›ï¼Œä½ ä»¬çš„å¿ƒé…¸ã€æ‚²å“€ã€æ‚”æ¨ï¼Œä¸€åˆ‡çš„ä¸€åˆ‡ï¼Œæˆ‘è‡ªä»¥ä¸ºéƒ½äº†è§£ã€‚å› æ­¤ï¼Œæˆ‘æ²¡æœ‰å¯¹åˆ«äººè¯´ä¸‰é“å››ï¼Œæ²¡æœ‰å¯¹åˆ«äººè‡ªä»¥ä¸ºæ˜¯åœ°æŒ‡æŒ‡ç‚¹ç‚¹ã€‚å¯æ˜¯ï¼Œè¯´è¿™å¥è¯çš„æƒåˆ©æˆ‘è¿˜æ˜¯æœ‰çš„ï¼Œä½ ä»¬å¤±è´¥äº†é€ƒè·‘äº†ï¼ŒèƒŒå›äº†æˆ‘ä»¬ã€‚é€ƒè·‘äº†ï¼Œè¿™ä¸€ç‚¹ï¼Œä½ ä»¬ç»™æˆ‘å¥½å¥½è®°ä½ã€‚</p>
</blockquote><p>å¥½äº†ï¼Œæˆ‘ä»¬ç°åœ¨ç»§ç»­å›åˆ°ä¸“æ æ–‡ç« ä¸Šå§ã€‚</p><p>Appå¯åŠ¨æ—¶é€šè¿‡ dyld åŠ è½½åŠ¨æ€åº“ï¼Œå°±æ˜¯è¿è¡Œæ—¶åŠ¨æ€åº“åŠ è½½åœ¨Appå¯åŠ¨é€Ÿåº¦ä¼˜åŒ–ä¸Šçš„ä¸€ä¸ªåº”ç”¨åœºæ™¯ã€‚åœ¨ä¸“æ çš„ç¬¬2ç¯‡æ–‡ç« â€œ<a href="https://time.geekbang.org/column/article/85331">App å¯åŠ¨é€Ÿåº¦æ€ä¹ˆåšä¼˜åŒ–ä¸ç›‘æ§ï¼Ÿ</a>â€ä¸­ï¼Œæˆ‘å’Œä½ åˆ†äº«äº†åŠ¨æ€åº“åŠ è½½åçš„ç›‘æ§å’Œä¼˜åŒ–ï¼Œæ–‡åçš„è¯„è®ºåŒºå°±æœ‰å¾ˆå¤šåŒå­¦æåˆ°äº†ï¼Œæƒ³è¦å¤šäº†è§£äº›åŠ¨æ€åº“åŠ è½½æ–¹é¢çš„ä¼˜åŒ–ã€‚</p><p>å…³äºAppå¼€å§‹å¯åŠ¨åˆ° main å‡½æ•°ä¹‹é—´çš„ dyld å†…éƒ¨ç»†èŠ‚ï¼Œæˆ‘æ¨èä½ å»çœ‹è‹¹æœå…¬å¸çš„ WWDC 2016 Session 406 <a href="https://developer.apple.com/videos/play/wwdc2016/406/">Optimizing App Startup Time</a>è§†é¢‘ã€‚è¿™ä¸ªè§†é¢‘é‡Œé¢ï¼Œä¸ä»…è¯¦ç»†å‰–æäº† dyldï¼Œè¿˜æä¾›äº†æ„å»ºä»£ç çš„æœ€ä½³å®è·µã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œâ€œ<a href="https://blog.automatic.com/how-we-cut-our-ios-apps-launch-time-in-half-with-this-one-cool-trick-7aca2011e2ea">How we cut our iOS appâ€™s launch time in half (with this one cool trick)</a>â€è¿™ç¯‡åšå®¢ï¼Œä¹Ÿæ˜¯ä¸ªä¸é”™çš„é˜…è¯»èµ„æ–™ã€‚å…‰çœ‹åå­—å°±å¾ˆå¸å¼•äººäº†ï¼Œå¯¹å§ã€‚</p><p>å…³äºApp å¯åŠ¨é€Ÿåº¦çš„è¯é¢˜ï¼Œå¾ˆå¤šåŒå­¦è¿˜æå‡ºäº†å…¶ä»–é—®é¢˜ï¼ŒåŒ…æ‹¬å¾ˆå¤šå…³äºè¯¾åä½œä¸šçš„é—®é¢˜ã€‚æ‰€ä»¥æ¥ä¸‹æ¥ï¼Œæˆ‘å°±é’ˆå¯¹è¿™ä¸ªè¯é¢˜å†ä¸“é—¨åšä¸ªç­”ç–‘å§ã€‚</p><h2>App å¯åŠ¨é€Ÿåº¦çš„ç›¸å…³é—®é¢˜</h2><p>ä¸“æ çš„ç¬¬2ç¯‡æ–‡ç« â€œ<a href="https://time.geekbang.org/column/article/85331">App å¯åŠ¨é€Ÿåº¦æ€ä¹ˆåšä¼˜åŒ–ä¸ç›‘æ§ï¼Ÿ</a>â€ä¸­çš„å¤§éƒ¨åˆ†é—®é¢˜ï¼Œæˆ‘éƒ½ç›´æ¥åœ¨è¯„è®ºåŒºå›å¤äº†ã€‚ä¸‹é¢çš„ç­”ç–‘å†…å®¹ï¼Œæˆ‘ä¸»è¦æ˜¯é’ˆå¯¹è¯¾åä½œä¸šå’Œæ±‡ç¼–éƒ¨åˆ†ï¼Œç»Ÿä¸€åšä¸‹å›å¤ã€‚</p><h3>å…³äºè¯¾åä½œä¸š</h3><p>åœ¨è¿™ç¯‡æ–‡ç« æœ€åï¼Œæˆ‘ç•™ä¸‹çš„è¯¾åä½œä¸šæ˜¯ï¼š</p><blockquote>
<p>æŒ‰ç…§ä»Šå¤©æ–‡ä¸­æåˆ°çš„ Time Profiler å·¥å…·æ£€æŸ¥æ–¹æ³•è€—æ—¶çš„åŸç†ï¼Œä½ æ¥åŠ¨æ‰‹å®ç°ä¸€ä¸ªæ–¹æ³•è€—æ—¶æ£€æŸ¥å·¥å…·å§ã€‚</p>
</blockquote><p>è™½ç„¶è¿™ä¸ªé—®é¢˜çš„æ€è·¯ï¼Œæˆ‘å·²ç»åœ¨æ–‡ç« ä¸­æåˆ°äº†ï¼Œä½†è¿˜æ˜¯æœ‰å¾ˆå¤šåŒå­¦æ„Ÿè§‰æ— ä»ä¸‹æ‰‹ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å†ä¸€èµ·æ¥çœ‹çœ‹è¿™ä¸ªæ€è€ƒé¢˜å§ã€‚</p><p>å…³äºå®ç°æ€è·¯ï¼Œæ–‡ä¸­æœ‰æ€ä¹ˆä¸€æ®µæ–‡å­—ï¼š</p><blockquote>
<p>å®šæ—¶æŠ“å–ä¸»çº¿ç¨‹ä¸Šçš„æ–¹æ³•è°ƒç”¨å †æ ˆï¼Œè®¡ç®—ä¸€æ®µæ—¶é—´é‡Œå„ä¸ªæ–¹æ³•çš„è€—æ—¶ã€‚</p>
</blockquote><p>ç°åœ¨ï¼Œæˆ‘ä»¬å†ä¸€èµ·çœ‹ä¸€ä¸‹è¿™ä¸ªå®ç°æ€è·¯ï¼ˆæˆ‘åŸæœ¬æœªåœ¨æ–‡ä¸­è¯¦ç»†å±•å¼€ï¼Œæ˜¯å¸Œæœ›å¤šç•™ç‚¹æ€è€ƒç©ºé—´ç»™ä½ ï¼‰ã€‚åŠ¨æ‰‹å†™è€—æ—¶æ£€æŸ¥å·¥å…·æ—¶ï¼Œé¦–å…ˆéœ€è¦å¼€å¯ä¸€ä¸ªå®šæ—¶å™¨ï¼Œæ¥å®šæ—¶è·å–æ–¹æ³•è°ƒç”¨å †æ ˆã€‚ä¸€æ®µæ—¶é—´å†…æ–¹æ³•è°ƒç”¨å †æ ˆç›¸åŒï¼Œé‚£ä¹ˆè¿™æ®µæ—¶é—´ï¼Œå°±æ˜¯è¿™ä¸ªæ–¹æ³•è°ƒç”¨å †æ ˆçš„æ ˆé¡¶æ–¹æ³•è€—æ—¶ã€‚</p><p><strong>è¿™ä¸ªè§£é¢˜æ€è·¯é‡Œå¾ˆå…³é”®çš„ä¸€æ­¥ï¼Œä¹Ÿæ˜¯ä½ æœ€å®¹æ˜“å¿½è§†çš„ä¸€æ­¥ï¼Œå°±æ˜¯åº”è¯¥æ€ä¹ˆåšå¥½è·å–æ–¹æ³•è°ƒç”¨å †æ ˆã€‚</strong></p><p>callstackSymbols æ˜¯ä¸€ç§è·å–æ–¹æ³•è°ƒç”¨æ ˆçš„æ–¹æ³•ï¼Œä½†æ˜¯åªèƒ½è·å–å½“å‰çº¿ç¨‹çš„è°ƒç”¨æ ˆï¼Œä¸ºäº†æŠŠå¯¹ä¸»çº¿ç¨‹çš„å½±å“é™åˆ°æœ€å°ï¼Œè·å–å½“å‰çº¿ç¨‹è°ƒç”¨æ ˆçš„å·¥ä½œå°±éœ€è¦åœ¨å…¶ä»–çº¿ç¨‹å»åšã€‚æ‰€ä»¥ï¼Œ<strong>è¿™ä¸ªè§£é¢˜æ€è·¯å°±éœ€è¦æ¢æˆï¼š</strong>ä½¿ç”¨ç³»ç»Ÿæä¾›çš„ task_threads å»è·å–æ‰€æœ‰çº¿ç¨‹ï¼Œä½¿ç”¨thread_info å¾—åˆ°å„ä¸ªçº¿ç¨‹çš„è¯¦ç»†ä¿¡æ¯ï¼Œä½¿ç”¨thread_get_state æ–¹æ³•å»è·å–çº¿ç¨‹æ ˆé‡Œçš„æ‰€æœ‰æ ˆæŒ‡é’ˆã€‚</p><p>å¦‚æœæ¥ä¸‹æ¥ç«‹åˆ»è¿›è¡Œç¬¦å·åŒ–å»è·å–æ–¹æ³•åï¼Œé‚£ä¹ˆå°±éœ€è¦å» __LINKEDIT segment é‡ŒæŸ¥æ‰¾æ ˆæŒ‡é’ˆåœ°å€æ‰€å¯¹åº”ç¬¦å·è¡¨çš„ç¬¦å·ï¼Œç‰¹åˆ«å½“ä½ è®¾ç½®çš„æ—¶é—´éš”è¾ƒå°çš„æ—¶å€™ï¼Œç¬¦å·åŒ–è¿‡ç¨‹ä¼šæŒç»­æ¶ˆè€—è¾ƒå¤šçš„CPUèµ„æºï¼Œä»è€Œå½±å“ä¸»çº¿ç¨‹ã€‚</p><p>æ‰€ä»¥ï¼Œè·å–åˆ°æ ˆæŒ‡é’ˆåï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨ç«‹åˆ»åšç¬¦å·åŒ–ï¼Œè€Œæ˜¯å…ˆä½¿ç”¨ä¸€ä¸ªç»“æ„ä½“å°†æ ˆåœ°å€è®°å½•ä¸‹æ¥ï¼Œæœ€åå†ç»Ÿä¸€ç¬¦å·åŒ–ï¼Œå°†å¯¹ä¸»çº¿ç¨‹çš„å½±å“é™åˆ°æœ€ä½ï¼Œè¿™æ ·è·å–çš„æ•°æ®ä¹Ÿä¼šæ›´åŠ å‡†ç¡®ã€‚</p><p>æˆ‘ä»¬å¯ä»¥æŠŠè®°å½•æ ˆåœ°å€çš„ç»“æ„ä½“è®¾è®¡ä¸ºé€šç”¨å›æº¯ç»“æ„ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code>typedef struct SMStackFrame {
    const struct SMStackFrame *const previous;
    const uintptr_t return_address;
} SMStackFrame;
</code></pre><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œ previous è®°å½•çš„æ˜¯ä¸Šä¸€ä¸ªæ ˆæŒ‡é’ˆçš„åœ°å€ã€‚è€ƒè™‘ CPU æ€§èƒ½ï¼Œè®°å½•å †æ ˆçš„æ•°é‡ä¹Ÿä¸å¿…å¾ˆå¤šï¼Œå–æœ€è¿‘å‡ æ¡å³å¯ã€‚é€šè¿‡æ ˆåŸºåœ°å€æŒ‡é’ˆè·å–å½“å‰æ ˆæŒ‡é’ˆåœ°å€çš„å…³é”®ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>// æ ˆåœ°å€åˆå§‹åŒ–
SMStackFrame stackFrame = {0};
// æ ˆåŸºåœ°å€æŒ‡é’ˆ
const uintptr_t framePointer = smMachStackBasePointerByCPU(&amp;machineContext);
if (framePointer == 0 || smMemCopySafely((void *)framePointer, &amp;stackFrame, sizeof(stackFrame)) != KERN_SUCCESS) {
    return @&quot;Fail frame pointer&quot;;
}
// ä¸‹é¢çš„8è¡¨ç¤ºå †æ ˆæ•°é‡
for (; i &lt; 8; i++) {
	// è®°å½•æ ˆåœ°å€
    buffer[i] = stackFrame.return_address;
    if (buffer[i] == 0 || stackFrame.previous == 0 || smMemCopySafely(stackFrame.previous, &amp;stackFrame, sizeof(stackFrame)) != KERN_SUCCESS) {
        break;
    }
}
</code></pre><h3>å…³äºæ±‡ç¼–ä»£ç çš„å­¦ä¹ </h3><p>é™¤äº†è¯¾åä½œä¸šï¼Œåœ¨è¿™ç¯‡æ–‡ç« çš„è¯„è®ºåŒºä¸­é—®åˆ°çš„æœ€å¤šçš„é—®é¢˜å°±æ˜¯objc_msgSend æ±‡ç¼–çš„éƒ¨åˆ†ã€‚@è¥¿äº¬å¯Œè´µå…”åœ¨è¯„è®ºåŒºç•™è¨€è¯´åˆ°ï¼š</p><blockquote>
<p>çœ‹å®Œè¿™ç¯‡æ–‡ç« æˆ‘è†¨èƒ€äº†ï¼Œéƒ½æ•¢å»ç¿»çœ‹ objc_msgSendçš„æºç æ–‡ä»¶äº†ã€‚å—¯ï¼Œä¸å‡ºæ„æ–™ï¼Œä¸€å¥æ²¡çœ‹æ‡‚ã€‚</p>
</blockquote><p>æˆ‘æƒ³è¦è¯´çš„æ˜¯ï¼Œæ±‡ç¼–å¹¶ä¸æ˜¯å¿…å­¦æŠ€èƒ½ï¼Œæˆ‘ä»¬åœ¨æ—¥å¸¸çš„ä¸šåŠ¡å¼€å‘å·¥ä½œä¸­ä¹Ÿå¾ˆå°‘ä¼šç”¨åˆ°ã€‚è€Œä¸”ï¼Œç°åœ¨ç¼–è¯‘å™¨å¯¹é«˜çº§è¯­è¨€çš„ä¼˜åŒ–å·²ç»åšå¾—éå¸¸å¥½äº†ï¼Œæ‰‹å†™å‡ºæ¥çš„æ±‡ç¼–ä»£ç æ€§èƒ½ä¸ä¸€å®šå°±ä¼šæ›´å¥½ã€‚å¦‚æœä½ çš„å·¥ä½œä¸æ¶‰åŠåˆ°é€†å‘å’Œå®‰å…¨é¢†åŸŸçš„è¯ï¼Œèƒ½å¤Ÿçœ‹æ‡‚æ±‡ç¼–ä»£ç å°±éå¸¸ä¸é”™äº†ã€‚</p><p>ä½†æ˜¯ï¼Œå¯¹äºé€†å‘å’Œå®‰å…¨é¢†åŸŸæ¥è¯´ï¼ŒæŒæ¡æ±‡ç¼–æŠ€èƒ½è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚<strong>å¦‚æœä½ æƒ³å­¦æ±‡ç¼–è¯­è¨€çš„è¯ï¼ŒåŒæ ·ä¹Ÿéœ€è¦åŠ¨æ‰‹å»ç¼–å†™å’Œè°ƒè¯•ä»£ç ï¼Œä½¿ç”¨ Xcodeå·¥å…·ä¹Ÿæ²¡æœ‰é—®é¢˜ã€‚åœ¨å¼€å§‹å­¦ä¹ æ—¶ï¼Œä½ å¯ä»¥æŒ‰ç…§æ•™ç¨‹è¾¹å­¦è¾¹å†™ï¼Œå…¶å®å°±å’Œå­¦ä¹ å…¶ä»–ç¼–ç¨‹è¯­è¨€çš„è¿‡ç¨‹ä¸€æ ·ã€‚</strong></p><p>è€Œå…·ä½“åˆ° objc_msgSend æºç çš„å‰–æï¼Œä½ å¯ä»¥å‚è€ƒ Mike Ash çš„ â€œ<a href="https://www.mikeash.com/pyblog/friday-qa-2017-06-30-dissecting-objc_msgsend-on-arm64.html">Dissecting objc_msgSend on ARM64</a>â€è¿™ç¯‡åšå®¢ï¼Œè¯¦ç»†è®²è¿°äº†objc_msgSend çš„ ARM64 æ±‡ç¼–ä»£ç ã€‚ç­‰ä½ çœ‹å®Œè¿™ç¯‡åšå®¢ä»¥åï¼Œå†æ¥çœ‹æˆ‘ä»¬è¿™ç¯‡æ–‡ç« ä¸­çš„æ±‡ç¼–ä»£ç å°±ä¸€å®šä¼šè§‰å¾—è½»æ¾å¾ˆå¤šã€‚</p><h2>å…³äºClangçš„ç›¸å…³é—®é¢˜</h2><p>ä¸“æ å·²ç»æ›´æ–°çš„ç¬¬7~ç¬¬10è¿™4ç¯‡æ–‡ç« ä¸­ï¼Œéƒ½æ¶‰åŠåˆ°äº†Clangçš„çŸ¥è¯†ä»¥åŠåº”ç”¨ï¼Œæ‰€ä»¥æˆ‘åœ¨è¿™é‡Œå•ç‹¬åˆ—å‡ºäº†ä¸€ä¸ªé—®é¢˜ï¼Œå’Œä½ ä¸€èµ·è§£å†³å…³äºClangçš„ç›¸å…³é—®é¢˜ã€‚</p><p>å…¶å®ï¼Œæˆ‘åœ¨ç¬¬7ç¯‡æ–‡ç« â€œ<a href="https://time.geekbang.org/column/article/87477">Clangã€Infer å’Œ OCLint ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨è°æ¥åšé™æ€åˆ†æï¼Ÿ</a>â€ä¸­ï¼Œä»‹ç»çš„3æ¬¾é™æ€åˆ†æå·¥å…·éƒ½ç”¨åˆ°äº†Clangï¼Œè€Œä¸”Clang æœ¬èº«ä¹Ÿæä¾›äº† LibTooling è¿™ç§å¼ºå¤§çš„ C++ æ¥å£æ¥æ–¹ä¾¿å®šåˆ¶ç‹¬ç«‹çš„å·¥å…·ã€‚</p><p>å½“ç„¶äº†ï¼ŒClang çš„çŸ¥è¯†ä¹Ÿæ˜¯éœ€è¦æŠ•å…¥å¤§é‡ç²¾åŠ›æ‰èƒ½æŒæ¡å¥½ã€‚é‚£ä¹ˆï¼Œä½ å¯èƒ½ä¼šé—®ï¼Œæˆ‘æŒæ¡è¿™äº›ååº•å±‚çš„çŸ¥è¯†æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Œå¥½åƒä¹Ÿè§£å†³ä¸äº†æˆ‘åœ¨ç°å®å¼€å‘å·¥ä½œä¸­é‡åˆ°çš„é—®é¢˜å•Šï¼Ÿ</p><p><strong>åœ¨æˆ‘çœ‹æ¥ï¼Œä½ åªæœ‰æŒæ¡äº†æŸä¸ªæ–¹é¢çš„çŸ¥è¯†ï¼Œåœ¨å·¥ä½œä¸­ç¢°åˆ°é—®é¢˜æ—¶æ‰èƒ½å¤Ÿæƒ³åˆ°ç”¨è¿™ä¸ªçŸ¥è¯†å»è§£å†³é—®é¢˜ã€‚å¦‚æœä½ éƒ½ä¸çŸ¥é“æœ‰è¿™ä¹ˆä¸€ç§æ–¹æ³•ï¼Œåˆæ€ä¹ˆä¼šç”¨å®ƒå»è§£å†³è‡ªå·±çš„é—®é¢˜å‘¢ï¼Ÿ</strong></p><p>å°±æ¯”å¦‚è¯´ï¼Œä½ æŒæ¡äº†Clangçš„çŸ¥è¯†ï¼Œé‚£åœ¨ç ”ç©¶<a href="https://time.geekbang.org/column/article/87925">æ— ä¾µå…¥çš„åŸ‹ç‚¹æ–¹æ¡ˆ</a>åº”è¯¥å¦‚ä½•å®ç°æ—¶ï¼Œä½ æ‰èƒ½å¯èƒ½ä¼šæƒ³åˆ°ç”¨Clangçš„LibTooling æ¥å¼€å‘ä¸€ä¸ªç‹¬ç«‹çš„å·¥å…·ï¼Œä¸“é—¨ä»¥é™æ€æ–¹å¼æ’å…¥åŸ‹ç‚¹çš„ä»£ç ï¼›åªæœ‰æŒæ¡äº†Clangçš„çŸ¥è¯†ï¼Œå½“ä½ åœ¨é¢å¯¹ä»£ç é‡è¾¾åˆ°ç™¾ä¸‡è¡Œçš„<a href="https://time.geekbang.org/column/article/88573">AppåŒ…ç˜¦èº«éœ€æ±‚</a>æ—¶ï¼Œæ‰ä¼šæƒ³åˆ°é€šè¿‡ Clang é™æ€åˆ†ææ¥å¼€å‘å·¥å…·ï¼Œå»æ£€æŸ¥æ— ç”¨çš„æ–¹æ³•å’Œç±»ã€‚</p><p>å½“ä½ æŒæ¡äº† Clang çš„ç›¸å…³çŸ¥è¯†åï¼Œç¼–è¯‘å‰ç«¯çš„æŠ€æœ¯ä¹Ÿå°±æŒæ¡å¾—å·®ä¸å¤šäº†ï¼›åœ¨ç†è§£äº†ç¼–è¯‘å‰ç«¯çš„è¯æ³•åˆ†æå’Œè¯­æ³•åˆ†æçš„å¥—è·¯åï¼Œè„±ç¦» Clang çš„æ¥å£å®Œæˆç¬¬8ç¯‡æ–‡ç« â€œ<a href="https://time.geekbang.org/column/article/87844">å¦‚ä½•åˆ©ç”¨ Clang ä¸º App æè´¨ï¼Ÿ</a>â€çš„è¯¾åä½œä¸šï¼Œä¹Ÿå°±æ²¡ä»€ä¹ˆéš¾åº¦äº†ã€‚</p><p>åœ¨å®Œæˆè¿™ä¸ªè¯¾åä½œä¸šä¹‹å‰ï¼Œä½ ä¹Ÿå¯ä»¥å…ˆçœ‹çœ‹ç‹å åœ¨2012å¹´çš„ä¸€ç¯‡åšå®¢â€œ<a href="http://www.yinwang.org/blog-cn/2012/08/01/interpreter">æ€æ ·å†™ä¸€ä¸ªè§£é‡Šå™¨</a>â€ã€‚çœ‹å®Œåè¿™ç¯‡åšå®¢åï¼Œä½ ä¸€å®šä¼šæœ‰æ’¸èµ·è¢–å­åŠ æ²¹å¹²çš„å†²åŠ²å„¿ã€‚</p><p>å…³äºç¬¬8ç¯‡æ–‡ç« çš„è¯¾åä½œä¸šï¼Œå¦‚æœä½ è¿˜æœ‰å…¶ä»–ä¸æ˜ç™½çš„åœ°æ–¹ï¼Œæ¬¢è¿ç»§ç»­ç»™æˆ‘ç•™è¨€ã€‚</p><h2>å°ç»“</h2><p>ä¸“æ æ›´æ–°è‡³ä»Šï¼Œå·²ç»å‘å¸ƒäº†10ç¯‡æ–‡ç« ï¼Œå¤§å®¶åœ¨è¯„è®ºåŒºç•™ä¸‹å¾ˆå¤šé«˜è´¨é‡çš„ç•™è¨€ï¼Œè®©æˆ‘éå¸¸æ„ŸåŠ¨ï¼Œåœ¨è¿™é‡Œæˆ‘ä¹Ÿè¦æ„Ÿè°¢ä½ çš„æ”¯æŒä¸é¼“åŠ±ã€‚</p><p>è¿™10ç¯‡æ–‡ç« å­¦ä¹ ä¸‹æ¥ï¼Œä½ å¯èƒ½ä¼šè§‰å¾—è¿™äº›æ–‡ç« so easyï¼Œä¹Ÿå¯èƒ½ä¼šè§‰å¾—è¿™äº›æ–‡ç« ç¡®å®å¸®ä½ è§£å†³äº†å·¥ä½œä¸­é‡åˆ°çš„å›°æƒ‘ï¼Œè¿˜å¯èƒ½ä¼šè§‰å¾—è¿™äº›æ–‡ç« å¤ªéš¾å•ƒäº†ä½†ä¾æ—§åœ¨åŠªåŠ›å­¦ä¹ ä¸­ï¼Œæˆ‘æƒ³è¦å’Œä½ è¯´çš„å°±æ˜¯ï¼šæœ‰çš„çŸ¥è¯†å­¦èµ·æ¥å¾ˆéš¾ï¼Œä½†æ˜¯å†åšæŒä¸€ä¸‹ï¼Œå¹¶ä¸æ–­é‡å¤ï¼Œåªè¦èƒ½æ¯”æ˜¨å¤©çš„è‡ªå·±è¿›æ­¥ä¸€ç‚¹ç‚¹ï¼Œç»ˆç©¶å¯ä»¥æŒæ¡ä½ æƒ³è¦çš„çŸ¥è¯†ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨ä»Šå¤©è¿™ç¯‡ç­”ç–‘æ–‡ç« ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬ä¸“æ çš„ç¬¬ä¸€ç¯‡ç­”ç–‘æ–‡ç« ä¸­ï¼Œæˆ‘ä¸æ‰“ç®—å¤§è€Œå…¨åœ°å»å›å¤å¤ªå¤šçš„é—®é¢˜ï¼Œåªæ˜¯ç”„é€‰äº†å…¶ä¸­å…¶ä¸­éå¸¸é‡è¦ã€æ ¸å¿ƒçš„å‡ ä¸ªé—®é¢˜ï¼Œå’Œä½ å†ä¸€èµ·å·©å›ºä¸‹æˆ‘ä»¬æ‰€å­¦çš„çŸ¥è¯†ï¼Œå¹¶å’Œä½ åˆ†äº«ä¸€äº›æˆ‘çš„å­¦ä¹ æ–¹æ³•ã€‚</p><p>å¸Œæœ›é€šè¿‡ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œå¯ä»¥å¸®ä½ ææ˜ç™½é‚£äº›è®©ä½ å›°æƒ‘çš„çŸ¥è¯†ç‚¹ï¼Œé€æ­¥åœ°å»ºç«‹èµ·è‡ªå·±çš„çŸ¥è¯†ä½“ç³»ã€‚å¦‚æœä½ è¿˜æœ‰å…¶ä»–çš„é—®é¢˜ï¼Œæ¬¢è¿ä½ ç»™æˆ‘ç•™è¨€ã€‚</p><p>æœ€åï¼Œè™½ç„¶è¿™æ˜¯ç¯‡ç­”ç–‘æ–‡ç« ï¼Œè¿˜æ˜¯è¦ç•™ç»™ä½ ä¸€ä¸ªå°å°çš„æ€è€ƒé¢˜ã€‚</p><p>ç‹å çš„åšå®¢æ–‡ç« ä¸­ï¼Œé™¤äº†æˆ‘åœ¨å‰é¢æåˆ°çš„â€œæ€æ ·å†™ä¸€ä¸ªè§£é‡Šå™¨â€å¤–ï¼Œå…¶ä»–æ–‡ç« ä¹Ÿéƒ½å¯ä»¥å¸®åŠ©ä½ å¼€é˜”çœ¼ç•Œï¼Œéå¸¸å€¼å¾—ä¸€çœ‹ã€‚åœ¨çœ‹å®Œä»–çš„åšå®¢åï¼Œä½ ä¼šå‘ç°ä»–å¯¹ç¼–ç¨‹è¯­è¨€æœ¬è´¨çš„ç†è§£éå¸¸é€å½»ï¼Œè€Œä½ è‡ªå·±ä¹Ÿèƒ½ä»ä¸­å—ç›Šè‰¯å¤šã€‚</p><p>æˆ‘åœ¨çœ‹å®Œä»–æ‰€æœ‰çš„åšå®¢æ–‡ç« ä¹‹åï¼Œå¯¹å¾ˆå¤šçŸ¥è¯†æœ‰äº†æ›´æ·±çš„ç†è§£ï¼Œä½†åŒæ—¶çŸ¥è¯†é‡ä¹Ÿéå¸¸å¤§ï¼Œæ— æ³•ä¸€æ—¶éƒ½æ¶ˆåŒ–æ‰ï¼Œæ„Ÿè§‰éœ€è¦å­¦ä¹ çš„åœ°æ–¹è¿˜æœ‰å¾ˆå¤šã€‚æ‰€ä»¥ï¼Œæˆ‘å½“æ—¶çš„æ„Ÿè§‰å°±æ˜¯é…¸ç”œè‹¦è¾£å’¸äº”å‘³ä¿±å…¨ã€‚ä¸çŸ¥é“ä½ çœ‹å®Œä»–çš„æ–‡ç« åï¼Œä¼šæœ‰ä»€ä¹ˆæ„Ÿè§‰å‘¢ï¼Ÿæˆ‘ä»¬å°±æŠŠè¿™ä¸ªè¯é¢˜ä½œä¸ºä»Šå¤©æ–‡ç« çš„æ€è€ƒé¢˜ï¼Œè¯·ä½ åœ¨è¯„è®ºåŒºåˆ†äº«ä¸€ä¸‹ä½ çš„é˜…åæ„Ÿå§ã€‚</p><p>æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œæ¬¢è¿ä½ åœ¨è¯„è®ºåŒºç»™æˆ‘ç•™è¨€åˆ†äº«ä½ çš„è§‚ç‚¹ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/f5/27/f5ee90aa0183a4bcc688980bd625eb27.jpg" alt=""></p><h2>ç²¾é€‰ç•™è¨€ï¼š</h2>
        <ul>
        
<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            ç»å½±  2019-04-04 00:29:50
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            å¯ä»¥åˆ†äº«å¤šä¸€äº›æ‚¨å…³æ³¨çš„åšå®¢æˆ–åšä¸»å—ï¼Ÿ [6èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-04-05 01:02:03</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">åœ¨åé¢å­¦ä¹ èµ„æ–™æ¨èç¯‡é‡Œæˆ‘ä¼šç»Ÿä¸€æ•´ç†å¥½æ¨èç»™å¤§å®¶å“ˆ</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            Mad Mark  2019-04-04 10:28:46
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            å…³äºMike Ashçš„é‚£ç¯‡objc_msgSendæ–‡ç« ï¼Œæˆ‘å†™è¿‡ä¸€ç¯‡è¯‘æ–‡ http:&#47;&#47;madmark.cc&#47;2017&#47;08&#47;01&#47;ARM64_objc-msgSend&#47; [3èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-04-05 01:03:00</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">èµ</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            é™ˆé˜¿ç¥¨  2019-04-10 19:51:19
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            å°†ä»£ç ç¼–å†™æˆåŠ¨æ€åº“ï¼Œå¯ä¸å¯ä»¥å‡å°‘å¯åŠ¨æ—¶é—´ï¼Ÿ [1èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            æ—¶é—´éƒ½å»å“ªäº†  2019-04-07 10:24:11
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è¯·é—®ä¸€ä¸ªæ–°é¡¹ç›®åœ¨è¿™ä¸ªæ—¶é—´ç‚¹ç”¨OCè¿˜æ˜¯swiftå‘¢?èƒ½è¯´è¯´ä¸¤è€…åº”è¯¥å¦‚ä½•é€‰æ‹©å‘¢? [1èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-04-07 14:08:11</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">æ–°é¡¹ç›®ç”¨ Swiftã€‚ä¸ç”¨çŠ¹è±«</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            Geek_e1d503  2019-04-04 01:03:18
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘æƒ³é—®ä¸‹å¹¶å‘é‡å¤§ã€æ—¥æ´»é‡å¤§çš„appè¯¥æ³¨æ„å“ªäº›å•Šï¼Œå®ƒçš„æ¶æ„å’Œæ€§èƒ½ä¸Šè¯¥æ³¨æ„å“ªäº›ï¼Ÿæœ‰æ²¡æœ‰ç›¸å…³èµ„æ–™å¯ä»¥æ¨èçœ‹ä¸‹çš„ï¼Ÿ [1èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            æ²§æµ·è¡ŒèˆŸ  2019-04-16 16:07:04
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            çœ‹å®Œç¬¬äºŒç¯‡å°±åœ¨åŠ¨æ‰‹å†™hook objc_msg_sendçš„ä»£ç ï¼Œè¿™æ˜¯å­¦ä¹ æ±‡ç¼–ä¸­è®°å½•çš„ä¸€äº›arm64æ±‡ç¼–çŸ¥è¯†https:&#47;&#47;github.com&#47;wzpziyi1&#47;Arm64-<br>æœ‰éœ€è¦çš„ç«¥é‹å¯ä»¥çœ‹çœ‹ã€‚<br>åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œå‘ç°ä¸€ä¸ªé—®é¢˜ï¼ˆæˆ–è€…è¯´æˆ‘ä»¥ä¸ºçš„bugï¼‰ã€‚<br>åœ¨æˆ´è€å¸ˆçš„ä»£ç ä¸­ï¼Œhook objc_msgSendä¹‹å‰ä¿å­˜ä¸ªå¯„å­˜å™¨çš„çŠ¶æ€æ—¶ï¼Œå¹¶æœªä¿å­˜å‘é‡å¯„å­˜å™¨çš„çŠ¶æ€ï¼š<br>&quot;stp q6, q7, [sp, #-32]!\n&quot; \<br>&quot;stp q4, q5, [sp, #-32]!\n&quot; \<br>&quot;stp q2, q3, [sp, #-32]!\n&quot; \<br>&quot;stp q0, q1, [sp, #-32]!\n&quot; \<br>&quot;stp x8, x9, [sp, #-16]!\n&quot; \<br>&quot;stp x6, x7, [sp, #-16]!\n&quot; \<br>&quot;stp x4, x5, [sp, #-16]!\n&quot; \<br>&quot;stp x2, x3, [sp, #-16]!\n&quot; \<br>&quot;stp x0, x1, [sp, #-16]!\n&quot; \<br><br>åªæ˜¯ä¿å­˜äº†é€šç”¨å¯„å­˜å™¨x0--x9å¯„å­˜å™¨çš„å€¼ï¼Œåœ¨è°ƒè¯•ä»£ç æ—¶ï¼Œå‘ç°è¿™æ ·çš„cä»£ç ï¼š<br>struct TestOne {<br>    double a;<br>    double b;<br>    double number;<br>    double type;<br>}TestOne;<br><br>void test(struct TestOne x) {<br>    x.a = 10;<br>    x.b = 20;<br>    x.number = 2;<br>    x.type = 11;<br>}<br><br>void call() {<br>    struct TestOne x = {0,0,0,0};<br>    test(x);<br>}<br><br>è½¬æˆarm64æ±‡ç¼–æ—¶ï¼Œç»“æ„ä½“çš„å€¼æ˜¯ä¿å­˜åœ¨å‘é‡å¯„å­˜å™¨d0--d4ä¸­çš„ï¼š<br>_test:                                  ; @test<br>	fmov	d4, #11.00000000<br>	fmov	d5, #2.00000000<br>	fmov	d6, #20.00000000<br>	fmov	d7, #10.00000000<br>	str	d0, [sp]<br>	str	d1, [sp, #8]<br>	str	d2, [sp, #16]<br>	str	d3, [sp, #24]<br>	str	d7, [sp]<br>	str	d6, [sp, #8]<br>	str	d5, [sp, #16]<br>	str	d4, [sp, #24]<br>	add	sp, sp, #32             ; =32<br>	ret<br><br><br>_call:                                  ; @call<br>	sub	sp, sp, #48             ; =48<br>	stp	x29, x30, [sp, #32]     ; 8-byte Folded Spill<br>	add	x29, sp, #32            ; =32<br>	mov	x8, #0<br>	str	x8, [sp, #24]<br>	str	x8, [sp, #16]<br>	str	x8, [sp, #8]<br>	str	x8, [sp]<br>	ldr	d3, [sp, #24]<br>	ldr	d2, [sp, #16]<br>	ldr	d1, [sp, #8]<br>	ldr	d0, [sp]<br>	bl	_test<br>	ldp	x29, x30, [sp, #32]     ; 8-byte Folded Reload<br>	add	sp, sp, #48             ; =48<br>	ret<br><br>å¦‚æœåœ¨é¡¹ç›®ä¸­ï¼Œæœ‰å¼€å‘ç«¥é‹ç›´æ¥è¿™ä¹ˆå†™ï¼š<br>- (void)doSomething:(struct TestOne)test;<br>é‚£ä¹ˆhook objc_msgSendæ—¶æ²¡ä¿å­˜çš„å‘é‡å¯„å­˜å™¨çš„çŠ¶æ€ï¼Œä¼šå‡ºç°é—®é¢˜çš„å§ï¼Ÿ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            melody  2019-04-10 17:32:03
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æƒ³é—®ä¸‹æ‚¨å¹³æ—¶éƒ½åˆ©ç”¨ä»€ä¹ˆé€”å¾„å»è·å–ä¸€äº›ä¼˜è´¨è‹¹æœçš„å®˜æ–¹æ–‡æ¡£å’Œåšå®¢å†…å®¹å‘¢ï¼Ÿ 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-04-13 15:21:54</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6"> å®˜æ–¹æ–‡æ¡£ç›´æ¥å°±åœ¨å®˜ç½‘æœç´¢ã€‚å‘ç°å¥½çš„åšå®¢æ–‡ç« ä¼šè®¢é˜…åšä¸»çš„åšå®¢äº†ï¼Œé€šè¿‡ RSS é˜…è¯»å™¨çœ‹ã€‚</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            é›é¹äº®  2019-04-09 15:06:34
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æˆ‘ç°åœ¨åœ¨åŸºäºclangå¼€å‘ï¼Œç›®æ ‡æ˜¯æ˜¯è®©ocæ”¯æŒAnnotationæ³¨è§£åŠŸèƒ½ï¼Œä½†æ˜¯å¼€æºçš„clangç‰ˆæœ¬è¦ä½äºXcodeä¸­é»˜è®¤çš„clangä¸¤ä¸ªç‰ˆæœ¬ï¼Œè€Œä¸”Xcode10è¿˜ä½¿ç”¨New Build Systemï¼Œæœ‰äº›ç¼–è¯‘å‚æ•°ä¹Ÿä¸å…¼å®¹ï¼Œè›‹ç–¼â€¦ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            è´°é›¶å£¹ç–  2019-04-05 19:41:04
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æå‡ºè¿™äº›é—®é¢˜çš„æœ‰ä¸ªæ¯”è¾ƒå¤§çš„åŸå› æ˜¯è®¡ç®—æœºç¼–ç¨‹çš„åŸºç¡€é—®é¢˜æ²¡æ‰“å¥½ï¼Œæˆ–è€…ä¸æ˜¯ç§‘ç­å‡ºèº«ä¸”æ²¡æœ‰ç³»ç»Ÿå­¦ä¹ è¿‡çš„ã€‚ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            Xcode  2019-04-05 10:06:13
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è°¢è°¢æˆ´è€å¸ˆå¥‰ä¸Šç²¾å½©çš„è¯¾ç¨‹ï¼Œå¤ªéœ€è¦è¿™ç§åŸåˆ›ï¼Œæ·±åº¦å¹¿åº¦å¹¶å­˜çš„å¹²è´§ï¼Œæ­£åœ¨å­¦ä¹ ä¸­ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            ç†Š  2019-04-04 22:34:26
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            å¯ä»¥åˆ†äº«å¤šä¸€äº›æ‚¨çš„å­¦ä¹ æ–¹æ³•ä¹ˆï¼Ÿä»¥åŠèƒ½å¦åˆ†äº«ä¸‹æ‚¨å…³æ³¨çš„ä¸€äº›å¤§ç¥çš„åšå®¢ï¼Œgithubå¤§ç¥ä¹ˆï¼Ÿéå¸¸æ„Ÿè°¢ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            addSubviewå·¥ç¨‹å¸ˆ  2019-04-04 10:17:14
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            èƒ½ä»‹ç»ä¸‹iOSè®¾è®¡æ¶æ„å˜›MVVMå•¥çš„æœ€è¿‘é¢è¯•è¢«é—®çš„å¤šäº† 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            FR  2019-04-04 09:56:22
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            å»ºè®®å¤šå‘ä¸€äº›ç›¸å…³çš„èµ„æ–™é“¾æ¥ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            HeminWon  2019-04-04 09:20:56
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æˆ´é“­è€å¸ˆğŸ‘ŠğŸ¼åŒ—å›½ä¹‹æ‹æˆ‘æ­£å¥½å…¨éƒ¨çœ‹å®Œ 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-04-05 01:02:21</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">èµ</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            å¼ è’™  2019-04-04 08:58:01
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            å­¦ä¹ äº†ï¼Œè°¢è°¢ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            å…ƒå…ƒ  2019-04-04 08:50:54
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æ‰«äº†ä¸€çœ¼æˆ‘å¤§è„‘å‘Šè¯‰æˆ‘å±é™©æˆ‘å°±ç‚¹äº†back 
        </div>
        
    </div>
</li>
            </ul>
</div>
</body>
</html>